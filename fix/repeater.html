<html>
	<head>
		<title>OnlineATV</title>
		<style>
			body {
			  background: black;
			  color: white;
			  margin: 0;
			}

			.channel {
			  position: relative;
			  width: 768px;
			  height: 576px;
			  display: inline-block;
			  border: 1px solid white;
			}

			video {
			  width: 100%;
			  height: 100%;
			  background: black;
			}

            .nosignal {
                position: absolute;
                inset: 0;
                background: black;
                color: white;
                font-family: monospace;
                pointer-events: none;
				font-size: 24px;
            }

            .channel-label {
                position: absolute;
                top: 8px;
                left: 8px;
                font-size: 18px;
                opacity: 0.85;
            }

            .center-nosignal {
                position: absolute;
                inset: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 48px;
                color: tomato;
                text-align: center;
            }
			
			#overlay {
				font-family: sans-serif;
				background-color: white;
				color: black;
				width:200px;
				text-align: center;
				border: 3px solid tomato;
				border-radius: 5px;
			}
			#overlay:hover { 
				color: blue; 
				font-weight: 600;
				cursor: pointer;
			}
		</style>
		
	</head>
	<body>
		<div id="overlay">Click to enable sound</div>
		<div class="channel">
			<video autoplay muted playsinline id="v1"
				src="https://oatv.maikroshet.com/ch1/index.m3u8"></video>
			<div class="nosignal" id="ns1">
				<div class="channel-label">Channel 1</div>
				<p class="center-nosignal">NO SIGNAL</p>
			</div>
		</div>

		<div class="channel">
			<video autoplay muted playsinline id="v2"
				src="https://oatv.maikroshet.com/ch2/index.m3u8"></video>
			<div class="nosignal" id="ns2">
				<div class="channel-label">Channel 2</div>
				<p class="center-nosignal">NO SIGNAL</p>
			</div>
		</div>
		<br>
		<div class="channel">
			<video autoplay muted playsinline id="v3"
				src="https://oatv.maikroshet.com/ch3/index.m3u8"></video>
			<div class="nosignal" id="ns3">
				<div class="channel-label">Channel 3</div>
				<p class="center-nosignal">NO SIGNAL</p>
			</div>
		</div>
		<div class="channel">
			<video autoplay muted playsinline id="v4"
				src="https://oatv.maikroshet.com/ch4/index.m3u8"></video>
			<div class="nosignal" id="ns4">
				<div class="channel-label">Channel 4</div>
				<p class="center-nosignal">NO SIGNAL</p>
			</div>
		</div>
		<script>
			function setup(video, overlay) {
			function show() { overlay.style.display = "flex"; }
			function hide() { overlay.style.display = "none"; }

			video.addEventListener("loadeddata", hide);
			video.addEventListener("playing", hide);

			video.addEventListener("error", show);
			video.addEventListener("stalled", show);
			video.addEventListener("waiting", show);
			video.addEventListener("emptied", show);
			}

			overlay.onclick = () => {
			  document.querySelectorAll("video").forEach(v => {
				v.muted = false;
				v.play();
			  });
			  overlay.remove();
			};

            function retryVideo(video) {
                if (
                    video.readyState === 0 || // HAVE_NOTHING
                    video.error ||
                    video.paused
                ) {
                    const src = video.src;
                    video.src = "";        // force reload
                    video.src = src;
                    video.load();
                    video.play().catch(() => { });
                }
            }

            setInterval(() => {
                document.querySelectorAll("video").forEach(retryVideo);
            }, 7000); // every 7 seconds

			setup(v1, document.querySelector("#ns1"));
			setup(v2, document.querySelector("#ns2"));
			setup(v3, document.querySelector("#ns3"));
			setup(v4, document.querySelector("#ns4"));

		</script>
	</body>
</html>
